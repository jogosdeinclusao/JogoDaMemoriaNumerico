<html><head><base href="." target="_blank" /><meta charset="UTF-8" /><title>Jogo da Memória com Números</title><style>
body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    color: white;
}

.game-container {
    max-width: 600px;
    padding: 20px;
    text-align: center;
}

.cards-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    margin: 20px 0;
}

.card {
    aspect-ratio: 1;
    background: #0f3460;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    cursor: pointer;
    border: 2px solid var(--theme-color, #e94560);
}

.card.flipped {
    background: var(--theme-color, #e94560);
}

.card:not(.flipped) span {
    display: none;
}

.stats {
    text-align: center;
    margin: 20px 0;
    font-size: 18px;
    display: flex;
    justify-content: center;
    gap: 20px;
}

.button-container {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-bottom: 20px;
}

button {
    background: var(--theme-color, #e94560);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    transition: transform 0.2s ease;
}

button:hover {
    transform: scale(1.05);
}

.win-message, .timeout-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(26, 26, 46, 0.95);
    padding: 20px;
    border-radius: 10px;
    text-align: center;
    display: none;
    box-shadow: 0 0 10px #00f7ff, 0 0 20px #00f7ff;
    border: 2px solid #00f7ff;
    min-width: 300px;
}

.win-message h2, .timeout-message h2 {
    color: white;
    margin-bottom: 20px;
}

.win-message p, .timeout-message p {
    color: white;
    margin: 10px 0;
}

body.theme-red {
    --theme-color: #e94560;
}

body.theme-green {
    --theme-color: #4CAF50;
}

body.theme-yellow {
    --theme-color: #FFC107;
}
</style></head><body>
<div class="game-container">
    <h1>Jogo da Memória Numérico</h1>
    <div class="stats">
        <div>Tentativas: <span id="attempts">0</span></div>
        <div>Tempo: <span id="timer">00:00</span></div>
    </div>
    <div class="cards-grid" id="grid"></div>
    <div class="button-container">
        <button onclick="resetGame()">Novo Jogo</button>
        <button onclick="changeTheme()">Mudar Tema</button>
    </div>
</div>

<div class="win-message" id="winMessage">
    <h2>Parabéns!</h2>
    <p>Você completou o jogo em <span id="finalAttempts">0</span> tentativas!</p>
    <p>Tempo: <span id="finalTime">00:00</span></p>
    <button onclick="resetGame()">Jogar Novamente</button>
</div>

<div class="timeout-message" id="timeoutMessage">
    <h2>Fim de Jogo!</h2>
    <p>O tempo limite de 1 hora foi atingido</p>
    <button onclick="resetGame()">Tente Novamente</button>
</div>

<script>
const gridSize = 16;
let numbers = [];
let flippedCards = [];
let matchedPairs = 0;
let attempts = 0;
let timer;
let seconds = 0;
let isGameStarted = false;

// Load saved theme
let currentTheme = localStorage.getItem('memoryGameTheme') || 'red';
const themes = ['red', 'green', 'yellow'];

// Apply saved theme
document.body.classList.add(`theme-${currentTheme}`);

function updateTimer() {
    const minutes = Math.floor(seconds / 60);
    const remainingSeconds = seconds % 60;
    const timeString = `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
    document.getElementById('timer').textContent = timeString;

    // Check for timeout (59:59)
    if (minutes === 59 && remainingSeconds === 59) {
        showTimeoutMessage();
    }

    return timeString;
}

function startTimer() {
    if (!isGameStarted) {
        isGameStarted = true;
        timer = setInterval(() => {
            seconds++;
            updateTimer();
        }, 1000);
    }
}

function changeTheme() {
    const currentIndex = themes.indexOf(currentTheme);
    const nextIndex = (currentIndex + 1) % themes.length;
    currentTheme = themes[nextIndex];
    
    document.body.classList.remove('theme-red', 'theme-green', 'theme-yellow');
    document.body.classList.add(`theme-${currentTheme}`);
    
    // Save theme preference
    localStorage.setItem('memoryGameTheme', currentTheme);
}

function generateNumbers() {
    numbers = [];
    for (let i = 0; i < gridSize/2; i++) {
        const num = Math.floor(Math.random() * 99) + 1;
        numbers.push(num, num);
    }
    numbers.sort(() => Math.random() - 0.5);
}

function createGrid() {
    const grid = document.getElementById('grid');
    grid.innerHTML = '';
    numbers.forEach((num, index) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.setAttribute('data-index', index);
        card.innerHTML = `<span>${num.toString().padStart(2, '0')}</span>`;
        card.addEventListener('click', flipCard);
        grid.appendChild(card);
    });
}

function flipCard() {
    startTimer();
    if (flippedCards.length === 2) return;
    if (this.classList.contains('flipped')) return;

    this.classList.add('flipped');
    flippedCards.push(this);

    if (flippedCards.length === 2) {
        attempts++;
        document.getElementById('attempts').textContent = attempts;
        
        const index1 = flippedCards[0].getAttribute('data-index');
        const index2 = flippedCards[1].getAttribute('data-index');

        if (numbers[index1] === numbers[index2]) {
            matchedPairs++;
            flippedCards = [];
            
            if (matchedPairs === gridSize/2) {
                setTimeout(showWinMessage, 500);
            }
        } else {
            setTimeout(() => {
                flippedCards.forEach(card => card.classList.remove('flipped'));
                flippedCards = [];
            }, 1000);
        }
    }
}

function showWinMessage() {
    clearInterval(timer);
    document.getElementById('finalAttempts').textContent = attempts;
    document.getElementById('finalTime').textContent = updateTimer();
    document.getElementById('winMessage').style.display = 'block';
}

function showTimeoutMessage() {
    clearInterval(timer);
    document.getElementById('timeoutMessage').style.display = 'block';
}

function resetGame() {
    matchedPairs = 0;
    attempts = 0;
    seconds = 0;
    isGameStarted = false;
    flippedCards = [];
    clearInterval(timer);
    document.getElementById('attempts').textContent = '0';
    document.getElementById('timer').textContent = '00:00';
    document.getElementById('winMessage').style.display = 'none';
    document.getElementById('timeoutMessage').style.display = 'none';
    generateNumbers();
    createGrid();
}

generateNumbers();
createGrid();
</script></body></html>